"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8247],{2679:function(ve,b,e){e.d(b,{Z:function(){return L}});var j=e(79105),E=e(63313),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},P=G,H=e(17980),v=function(m,U){return E.createElement(H.Z,(0,j.Z)((0,j.Z)({},m),{},{ref:U,icon:P}))};v.displayName="StopOutlined";var L=E.forwardRef(v)},36107:function(ve,b,e){e.r(b);var j=e(35290),E=e.n(j),G=e(411),P=e.n(G),H=e(46686),v=e.n(H),L=e(63313),f=e.n(L),m=e(78455),U=e(80743),T=e(97325),k=e(2991),ee=e(45362),w=e(9408),F=e(11527),J=function(g){var Y=g.ids,le=g.handleCancel,d=g.visible,r=m.Z.useForm(),c=v()(r,1),l=c[0],u=(0,L.useState)(!1),K=v()(u,2),A=K[0],D=K[1],$=function(){var x=P()(E()().mark(function _(R){var y,t,C;return E()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return D(!0),O.prev=1,O.next=4,ee.W.put("".concat(w.Z.apiPrefix,"envs/name"),{data:{ids:Y,name:R.name}});case 4:y=O.sent,t=y.code,C=y.data,t===200&&(U.ZP.success("\u66F4\u65B0\u73AF\u5883\u53D8\u91CF\u540D\u79F0\u6210\u529F"),le()),D(!1),O.next=14;break;case 11:O.prev=11,O.t0=O.catch(1),D(!1);case 14:case"end":return O.stop()}},_,null,[[1,11]])}));return function(R){return x.apply(this,arguments)}}();return(0,L.useEffect)(function(){l.resetFields()},[Y,d]),(0,F.jsx)(T.Z,{title:"\u4FEE\u6539\u73AF\u5883\u53D8\u91CF\u540D\u79F0",open:d,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){l.validateFields().then(function(_){$(_)}).catch(function(_){console.log("Validate Failed:",_)})},onCancel:function(){return le()},confirmLoading:A,children:(0,F.jsx)(m.Z,{form:l,layout:"vertical",name:"edit_name_modal",children:(0,F.jsx)(m.Z.Item,{name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u7684\u73AF\u5883\u53D8\u91CF\u540D\u79F0"}],children:(0,F.jsx)(k.Z,{placeholder:"\u8BF7\u8F93\u5165\u65B0\u7684\u73AF\u5883\u53D8\u91CF\u540D\u79F0"})})})})};b.default=J},23920:function(ve,b,e){e.r(b),e.d(b,{default:function(){return z}});var j=e(94434),E=e.n(j),G=e(30279),P=e.n(G),H=e(46686),v=e.n(H),L=e(44463),f=e.n(L),m=e(63313),U=e(6946),T=e(2991),k=e(74318),ee=e(26591),w=e(34541),F=e(97325),J=e(80743),W=e(74309),g=e(46669),Y=e(26099),le=e(96320),d=e(2679),r=e(39449),c=e(9408),l=e(35563),u=e(45362),K=e(43212),A=e(36107),D=e(74016),$=e(17940),x=e(72236),_=e(66255),R=e(79610),y=e(55261),t=e(11527),C=["index","moveRow","className","style"],S=U.Z.Text,O=U.Z.Paragraph,re=T.Z.Search,p;(function(o){o[o.\u5DF2\u542F\u7528=0]="\u5DF2\u542F\u7528",o[o.\u5DF2\u7981\u7528=1]="\u5DF2\u7981\u7528"})(p||(p={}));var Q;(function(o){o[o.success=0]="success",o[o.error=1]="error"})(Q||(Q={}));var N;(function(o){o[o.\u542F\u7528=0]="\u542F\u7528",o[o.\u7981\u7528=1]="\u7981\u7528"})(N||(N={}));var X;(function(o){o[o.enable=0]="enable",o[o.disable=1]="disable"})(X||(X={}));var q="DragableBodyRow",se=function(Z){var ne=Z.index,de=Z.moveRow,fe=Z.className,ue=Z.style,ce=f()(Z,C),te=(0,m.useRef)(),M=(0,D.L)({accept:q,collect:function(ae){var pe=ae.getItem()||{},xe=pe.index;return xe===ne?{}:{isOver:ae.isOver(),dropClassName:xe<ne?" drop-over-downward":" drop-over-upward"}},drop:function(ae){de(ae.index,ne)}}),B=v()(M,2),ge=B[0],he=ge.isOver,Ee=ge.dropClassName,_e=B[1],De=(0,$.c)({type:q,item:{index:ne},collect:function(ae){return{isDragging:ae.isDragging()}}}),Ce=v()(De,2),ye=Ce[1];return _e(ye(te)),(0,t.jsx)("tr",P()({ref:te,className:"".concat(fe).concat(he?Ee:""),style:P()({cursor:"move"},ue)},ce))},oe=function(){var Z=(0,y.bx)(),ne=Z.headerStyle,de=Z.isPhone,fe=Z.theme,ue=[{title:"\u5E8F\u53F7",align:"center",width:60,render:function(n,a,i){return(0,t.jsxs)("span",{style:{cursor:"text"},children:[i+1," "]})}},{title:"\u540D\u79F0",dataIndex:"name",key:"name",align:"center",sorter:function(n,a){return n.name.localeCompare(a.name)}},{title:"\u503C",dataIndex:"value",key:"value",align:"center",width:"35%",render:function(n,a){return(0,t.jsx)(O,{style:{wordBreak:"break-all",marginBottom:0,textAlign:"left"},ellipsis:{tooltip:n,rows:2},children:n})}},{title:"\u5907\u6CE8",dataIndex:"remarks",key:"remarks",align:"center"},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"timestamp",key:"timestamp",align:"center",width:165,ellipsis:{showTitle:!1},sorter:{compare:function(n,a){var i=new Date(n.updatedAt||n.timestamp).getTime(),h=new Date(a.updatedAt||a.timestamp).getTime();return i-h}},render:function(n,a){var i=navigator.language||navigator.languages[0],h=a.updatedAt||a.timestamp,I=new Date(h).toLocaleString(i,{hour12:!1}).replace(" 24:"," 00:");return(0,t.jsx)(k.Z,{placement:"topLeft",title:I,trigger:["hover","click"],children:(0,t.jsx)("span",{children:I})})}},{title:"\u72B6\u6001",key:"status",dataIndex:"status",align:"center",width:70,filters:[{text:"\u5DF2\u542F\u7528",value:0},{text:"\u5DF2\u7981\u7528",value:1}],onFilter:function(n,a){return a.status===n},render:function(n,a,i){return(0,t.jsx)(ee.Z,{size:"middle",style:{cursor:"text"},children:(0,t.jsx)(w.Z,{color:Q[a.status],style:{marginRight:0},children:p[a.status]})})}},{title:"\u64CD\u4F5C",key:"action",width:120,align:"center",render:function(n,a,i){var h=!de;return(0,t.jsxs)(ee.Z,{size:"middle",children:[(0,t.jsx)(k.Z,{title:h?"\u7F16\u8F91":"",children:(0,t.jsx)("a",{onClick:function(){return Ge(a,i)},children:(0,t.jsx)(Y.Z,{})})}),(0,t.jsx)(k.Z,{title:h?a.status===p.\u5DF2\u7981\u7528?"\u542F\u7528":"\u7981\u7528":"",children:(0,t.jsx)("a",{onClick:function(){return ze(a,i)},children:a.status===p.\u5DF2\u7981\u7528?(0,t.jsx)(le.Z,{}):(0,t.jsx)(d.Z,{})})}),(0,t.jsx)(k.Z,{title:h?"\u5220\u9664":"",children:(0,t.jsx)("a",{onClick:function(){return He(a,i)},children:(0,t.jsx)(r.Z,{})})})]})}}],ce=(0,m.useState)([]),te=v()(ce,2),M=te[0],B=te[1],ge=(0,m.useState)(!0),he=v()(ge,2),Ee=he[0],_e=he[1],De=(0,m.useState)(!1),Ce=v()(De,2),ye=Ce[0],ie=Ce[1],ae=(0,m.useState)(!1),pe=v()(ae,2),xe=pe[0],je=pe[1],Le=(0,m.useState)(),Fe=v()(Le,2),We=Fe[0],Ze=Fe[1],Ke=(0,m.useState)([]),Me=v()(Ke,2),V=Me[0],Ae=Me[1],Ne=(0,m.useState)(""),Re=v()(Ne,2),Se=Re[0],Ue=Re[1],ke=(0,m.useState)(),be=v()(ke,2),$e=be[0],Te=be[1],Oe=function(){_e(!0),u.W.get("".concat(c.Z.apiPrefix,"envs?searchValue=").concat(Se)).then(function(n){var a=n.code,i=n.data;a===200&&B(i)}).finally(function(){return _e(!1)})},ze=function(n,a){F.Z.confirm({title:"\u786E\u8BA4".concat(n.status===p.\u5DF2\u7981\u7528?"\u542F\u7528":"\u7981\u7528"),content:(0,t.jsxs)(t.Fragment,{children:["\u786E\u8BA4",n.status===p.\u5DF2\u7981\u7528?"\u542F\u7528":"\u7981\u7528","Env"," ",(0,t.jsx)(S,{style:{wordBreak:"break-all"},type:"warning",children:n.value})," ","\u5417"]}),onOk:function(){u.W.put("".concat(c.Z.apiPrefix,"envs/").concat(n.status===p.\u5DF2\u7981\u7528?"enable":"disable"),{data:[n.id]}).then(function(h){var I=h.code,me=h.data;if(I===200){J.ZP.success("".concat(n.status===p.\u5DF2\u7981\u7528?"\u542F\u7528":"\u7981\u7528","\u6210\u529F"));var Pe=n.status===p.\u5DF2\u7981\u7528?p.\u5DF2\u542F\u7528:p.\u5DF2\u7981\u7528,Ie=E()(M);Ie.splice(a,1,P()(P()({},n),{},{status:Pe})),B(Ie)}})},onCancel:function(){console.log("Cancel")}})},Ve=function(){Ze(null),ie(!0)},Ge=function(n,a){Ze(n),ie(!0)},He=function(n,a){F.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,t.jsxs)(t.Fragment,{children:["\u786E\u8BA4\u5220\u9664\u53D8\u91CF"," ",(0,t.jsxs)(S,{style:{wordBreak:"break-all"},type:"warning",children:[n.name,": ",n.value]})," ","\u5417"]}),onOk:function(){u.W.delete("".concat(c.Z.apiPrefix,"envs"),{data:[n.id]}).then(function(h){var I=h.code,me=h.data;if(I===200){J.ZP.success("\u5220\u9664\u6210\u529F");var Pe=E()(M);Pe.splice(a,1),B(Pe)}})},onCancel:function(){console.log("Cancel")}})},we=function(n){ie(!1),n&&Ye(n)},Je=function(n){je(!1),Oe()},Ye=function(n){var a=E()(M),i=M.findIndex(function(h){return h.id===n.id});i===-1?(n=Array.isArray(n)?n:[n],a.push.apply(a,E()(n))):a.splice(i,1,P()({},n)),B(a)},Qe={body:{row:se}},Xe=(0,m.useCallback)(function(s,n){if(s!==n){var a=M[s];u.W.put("".concat(c.Z.apiPrefix,"envs/").concat(a.id,"/move"),{data:{fromIndex:s,toIndex:n}}).then(function(i){var h=i.code,I=i.data;if(h===200){var me=E()(M);me.splice(s,1),me.splice(n,0,P()(P()({},a),I.data)),B(E()(me))}})}},[M]),qe=function(n){Ae(n),setTimeout(function(){(V.length===0||n.length===0)&&Te((0,R.W9)({extraHeight:87}))})},en={selectedRowIds:V,onChange:qe},nn=function(){F.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,t.jsx)(t.Fragment,{children:"\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u53D8\u91CF\u5417"}),onOk:function(){u.W.delete("".concat(c.Z.apiPrefix,"envs"),{data:V}).then(function(a){var i=a.code,h=a.data;i===200&&(J.ZP.success("\u6279\u91CF\u5220\u9664\u6210\u529F"),Ae([]),Oe())})},onCancel:function(){console.log("Cancel")}})},Be=function(n){F.Z.confirm({title:"\u786E\u8BA4".concat(N[n]),content:(0,t.jsxs)(t.Fragment,{children:["\u786E\u8BA4",N[n],"\u9009\u4E2D\u7684\u53D8\u91CF\u5417"]}),onOk:function(){u.W.put("".concat(c.Z.apiPrefix,"envs/").concat(X[n]),{data:V}).then(function(i){var h=i.code,I=i.data;h===200&&Oe()})},onCancel:function(){console.log("Cancel")}})},tn=function(){var n=M.filter(function(a){return V.includes(a.id)}).map(function(a){return{value:a.value,name:a.name,remarks:a.remarks}});(0,R.w7)("env.json",JSON.stringify(n))},an=function(){je(!0)},ln=function(n){Ue(n.trim())};return(0,m.useEffect)(function(){Oe()},[Se]),(0,m.useEffect)(function(){setTimeout(function(){Te((0,R.W9)({extraHeight:87}))})},[]),(0,t.jsxs)(l.ZP,{className:"ql-container-wrapper env-wrapper",title:"\u73AF\u5883\u53D8\u91CF",extra:[(0,t.jsx)(re,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0/\u503C/\u5907\u6CE8",style:{width:"auto"},enterButton:!0,loading:Ee,onSearch:ln}),(0,t.jsx)(W.Z,{type:"primary",onClick:function(){return Ve()},children:"\u65B0\u5EFA\u53D8\u91CF"},"2")],header:{style:ne},children:[V.length>0&&(0,t.jsxs)("div",{style:{marginBottom:16},children:[(0,t.jsx)(W.Z,{type:"primary",style:{marginBottom:5},onClick:an,children:"\u6279\u91CF\u4FEE\u6539\u53D8\u91CF\u540D\u79F0"}),(0,t.jsx)(W.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:nn,children:"\u6279\u91CF\u5220\u9664"}),(0,t.jsx)(W.Z,{type:"primary",onClick:function(){return tn()},style:{marginLeft:8,marginRight:8},children:"\u6279\u91CF\u5BFC\u51FA"}),(0,t.jsx)(W.Z,{type:"primary",onClick:function(){return Be(0)},style:{marginLeft:8,marginBottom:5},children:"\u6279\u91CF\u542F\u7528"}),(0,t.jsx)(W.Z,{type:"primary",onClick:function(){return Be(1)},style:{marginLeft:8,marginRight:8},children:"\u6279\u91CF\u7981\u7528"}),(0,t.jsxs)("span",{style:{marginLeft:8},children:["\u5DF2\u9009\u62E9",(0,t.jsx)("a",{children:V==null?void 0:V.length}),"\u9879"]})]}),(0,t.jsx)(x.W,{backend:_.PD,children:(0,t.jsx)(g.Z,{columns:ue,rowSelection:en,pagination:!1,dataSource:M,rowKey:"id",size:"middle",scroll:{x:1e3,y:$e},components:Qe,loading:Ee,onRow:function(n,a){return{index:a,moveRow:Xe}}})}),(0,t.jsx)(K.default,{visible:ye,handleCancel:we,env:We}),(0,t.jsx)(A.default,{visible:xe,handleCancel:Je,ids:V})]})},z=oe},43212:function(ve,b,e){e.r(b);var j=e(35290),E=e.n(j),G=e(30279),P=e.n(G),H=e(411),v=e.n(H),L=e(46686),f=e.n(L),m=e(63313),U=e.n(m),T=e(78455),k=e(80743),ee=e(97325),w=e(2991),F=e(39958),J=e(45362),W=e(9408),g=e(11527),Y=function(d){var r=d.env,c=d.handleCancel,l=d.visible,u=T.Z.useForm(),K=f()(u,1),A=K[0],D=(0,m.useState)(!1),$=f()(D,2),x=$[0],_=$[1],R=function(){var y=v()(E()().mark(function t(C){var S,O,re,p,Q,N,X,q,se,oe;return E()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return _(!0),S=C.value,O=C.split,re=C.name,p=C.remarks,Q=r?"put":"post",r?N=P()(P()({},C),{},{id:r.id}):O==="1"?(X=S.includes("&")?"&":`
`,N=S.split(X).map(function(Z){return{name:re,value:Z,remarks:p}})):N=[{value:S,name:re,remarks:p}],o.prev=4,o.next=7,J.W[Q]("".concat(W.Z.apiPrefix,"envs"),{data:N});case 7:q=o.sent,se=q.code,oe=q.data,se===200&&(k.ZP.success(r?"\u66F4\u65B0\u53D8\u91CF\u6210\u529F":"\u65B0\u5EFA\u53D8\u91CF\u6210\u529F"),c(oe)),_(!1),o.next=17;break;case 14:o.prev=14,o.t0=o.catch(4),_(!1);case 17:case"end":return o.stop()}},t,null,[[4,14]])}));return function(C){return y.apply(this,arguments)}}();return(0,m.useEffect)(function(){A.resetFields()},[r,l]),(0,g.jsx)(ee.Z,{title:r?"\u7F16\u8F91\u53D8\u91CF":"\u65B0\u5EFA\u53D8\u91CF",open:l,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){A.validateFields().then(function(t){R(t)}).catch(function(t){console.log("Validate Failed:",t)})},onCancel:function(){return c()},confirmLoading:x,children:(0,g.jsxs)(T.Z,{form:A,layout:"vertical",name:"env_modal",initialValues:r,children:[(0,g.jsx)(T.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u73AF\u5883\u53D8\u91CF\u540D\u79F0",whitespace:!0},{pattern:/^[a-zA-Z_][0-9a-zA-Z_]*$/,message:"\u53EA\u80FD\u8F93\u5165\u5B57\u6BCD\u6570\u5B57\u4E0B\u5212\u7EBF\uFF0C\u4E14\u4E0D\u80FD\u4EE5\u6570\u5B57\u5F00\u5934"}],children:(0,g.jsx)(w.Z,{placeholder:"\u8BF7\u8F93\u5165\u73AF\u5883\u53D8\u91CF\u540D\u79F0"})}),!r&&(0,g.jsx)(T.Z.Item,{name:"split",label:"\u81EA\u52A8\u62C6\u5206",initialValue:"0",tooltip:"\u591A\u4E2A\u4F9D\u8D56\u662F\u5426\u6362\u884C\u5206\u5272",children:(0,g.jsxs)(F.ZP.Group,{children:[(0,g.jsx)(F.ZP,{value:"1",children:"\u662F"}),(0,g.jsx)(F.ZP,{value:"0",children:"\u5426"})]})}),(0,g.jsx)(T.Z.Item,{name:"value",label:"\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u73AF\u5883\u53D8\u91CF\u503C",whitespace:!0}],children:(0,g.jsx)(w.Z.TextArea,{rows:4,autoSize:!0,placeholder:"\u8BF7\u8F93\u5165\u73AF\u5883\u53D8\u91CF\u503C"})}),(0,g.jsx)(T.Z.Item,{name:"remarks",label:"\u5907\u6CE8",children:(0,g.jsx)(w.Z,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})})]})})};b.default=Y},34541:function(ve,b,e){e.d(b,{Z:function(){return le}});var j=e(47220),E=e(96600),G=e(35931),P=e(60382),H=e(84875),v=e.n(H),L=e(1334),f=e(63313),m=e(71010),U=e(64065),T=e(84144),k=function(d,r){var c={};for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&r.indexOf(l)<0&&(c[l]=d[l]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(d);u<l.length;u++)r.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(d,l[u])&&(c[l[u]]=d[l[u]]);return c},ee=function(r){var c,l=r.prefixCls,u=r.className,K=r.checked,A=r.onChange,D=r.onClick,$=k(r,["prefixCls","className","checked","onChange","onClick"]),x=f.useContext(m.E_),_=x.getPrefixCls,R=function(S){A==null||A(!K),D==null||D(S)},y=_("tag",l),t=v()(y,(c={},(0,j.Z)(c,"".concat(y,"-checkable"),!0),(0,j.Z)(c,"".concat(y,"-checkable-checked"),K),c),u);return f.createElement("span",(0,E.Z)({},$,{className:t,onClick:R}))},w=ee,F=function(d,r){var c={};for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&r.indexOf(l)<0&&(c[l]=d[l]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(d);u<l.length;u++)r.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(d,l[u])&&(c[l[u]]=d[l[u]]);return c},J=new RegExp("^(".concat(U.Y.join("|"),")(-inverse)?$")),W=new RegExp("^(".concat(U.E.join("|"),")$")),g=function(r,c){var l,u=r.prefixCls,K=r.className,A=r.style,D=r.children,$=r.icon,x=r.color,_=r.onClose,R=r.closeIcon,y=r.closable,t=y===void 0?!1:y,C=F(r,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),S=f.useContext(m.E_),O=S.getPrefixCls,re=S.direction,p=f.useState(!0),Q=(0,G.Z)(p,2),N=Q[0],X=Q[1];f.useEffect(function(){"visible"in C&&X(C.visible)},[C.visible]);var q=function(){return x?J.test(x)||W.test(x):!1},se=(0,E.Z)({backgroundColor:x&&!q()?x:void 0},A),oe=q(),z=O("tag",u),o=v()(z,(l={},(0,j.Z)(l,"".concat(z,"-").concat(x),oe),(0,j.Z)(l,"".concat(z,"-has-color"),x&&!oe),(0,j.Z)(l,"".concat(z,"-hidden"),!N),(0,j.Z)(l,"".concat(z,"-rtl"),re==="rtl"),l),K),Z=function(B){B.stopPropagation(),_==null||_(B),!B.defaultPrevented&&("visible"in C||X(!1))},ne=function(){return t?R?f.createElement("span",{className:"".concat(z,"-close-icon"),onClick:Z},R):f.createElement(P.Z,{className:"".concat(z,"-close-icon"),onClick:Z}):null},de="onClick"in C||D&&D.type==="a",fe=(0,L.Z)(C,["visible"]),ue=$||null,ce=ue?f.createElement(f.Fragment,null,ue,f.createElement("span",null,D)):D,te=f.createElement("span",(0,E.Z)({},fe,{ref:c,className:o,style:se}),ce,ne());return de?f.createElement(T.Z,null,te):te},Y=f.forwardRef(g);Y.CheckableTag=w;var le=Y}}]);
