"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9651],{29651:function(re,R,e){e.r(R);var O=e(46686),r=e.n(O),a=e(63313),W=e.n(a),S=e(77073),F=e(26322),E=e(7691),D=e(74309),u=e(45362),C=e(9408),f=e(90138),p=e(30555),x=e(46127),i=e(59386),d=e(77136),n=e(11527),o=S.Z.Option,A={".py":"python",".js":"javascript",".sh":"shell",".ts":"typescript"},H={python:".py",javascript:".js",shell:".sh",typescript:".ts"},m=function(t){var M=t.treeData,_=t.currentNode,c=t.content,P=t.handleCancel,X=t.visible,I=t.socketMessage,w=(0,a.useState)(""),B=r()(w,2),q=B[0],L=B[1],T=(0,a.useState)("javascript"),b=r()(T,2),y=b[0],ee=b[1],U=(0,a.useState)(),j=r()(U,2),v=j[0],V=j[1],te=(0,a.useState)(""),Z=r()(te,2),N=Z[0],le=Z[1],se=(0,a.useState)(!1),ie=r()(se,2),k=ie[0],ue=ie[1],ve=(0,a.useState)(!1),de=r()(ve,2),K=de[0],me=de[1],J=(0,a.useState)(""),ne=r()(J,2),_e=ne[0],$=ne[1],ge=(0,d.F)(),ae=ge.theme,Q=(0,a.useRef)(null),he=(0,a.useState)(!1),ce=r()(he,2),Y=ce[0],G=ce[1],pe=function(){P()},Me=function(l,h){if(!(h.key===N||!l)){var z=A[l.slice(-3)]||"";V(h),ee(z),Oe(h),le(h.key)}},Oe=function(l){u.W.get("".concat(C.Z.apiPrefix,"scripts/").concat(l.title,"?path=").concat(l.parent||"")).then(function(h){var z=h.code,oe=h.data;z===200&&L(oe)})},De=function(){$("");var l=Q.current.getValue().replace(/\r\n/g,`
`);u.W.put("".concat(C.Z.apiPrefix,"scripts/run"),{data:{filename:v.title,path:v.parent||"",content:l}}).then(function(h){var z=h.code,oe=h.data;z===200&&G(!0)})},Ee=function(){if(!(!v||!v.title)){var l=Q.current.getValue().replace(/\r\n/g,`
`);u.W.put("".concat(C.Z.apiPrefix,"scripts/stop"),{data:{filename:v.title,path:v.parent||"",content:l}}).then(function(h){var z=h.code,oe=h.data;z===200&&G(!1)})}};return(0,a.useEffect)(function(){if(!!I){var g=I.type,l=I.message,h=I.references;g==="manuallyRunScript"&&(l.includes("\u6267\u884C\u7ED3\u675F")&&setTimeout(function(){G(!1)},300),_e&&(l=`
`.concat(l)),$("".concat(_e).concat(l)))}},[I]),(0,a.useEffect)(function(){_&&(V(_),L(c),le(_.key))},[c,_]),(0,n.jsxs)(F.Z,{className:"edit-modal",closable:!1,title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{style:{marginRight:8,width:150},value:N,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:M,placeholder:"\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6",fieldNames:{value:"key",label:"title"},showSearch:!0,onSelect:Me}),(0,n.jsxs)(S.Z,{value:y,style:{width:110,marginRight:8},onChange:function(l){ee(l)},children:[(0,n.jsx)(o,{value:"javascript",children:"javascript"}),(0,n.jsx)(o,{value:"typescript",children:"typescript"}),(0,n.jsx)(o,{value:"shell",children:"shell"}),(0,n.jsx)(o,{value:"python",children:"python"})]}),(0,n.jsx)(D.Z,{type:"primary",style:{marginRight:8},onClick:Y?Ee:De,children:Y?"\u505C\u6B62":"\u8FD0\u884C"}),(0,n.jsx)(D.Z,{type:"primary",style:{marginRight:8},onClick:function(){$("")},children:"\u6E05\u7A7A\u65E5\u5FD7"}),(0,n.jsx)(D.Z,{type:"primary",style:{marginRight:8},onClick:function(){me(!0)},children:"\u8BBE\u7F6E"}),(0,n.jsx)(D.Z,{type:"primary",style:{marginRight:8},onClick:function(){ue(!0)},children:"\u4FDD\u5B58"}),(0,n.jsx)(D.Z,{type:"primary",style:{marginRight:8},onClick:function(){Ee(),P()},children:"\u9000\u51FA"})]}),width:"100%",headerStyle:{padding:"11px 24px"},onClose:pe,open:X,children:[(0,n.jsxs)(f.Z,{split:"vertical",minSize:200,defaultSize:"50%",style:{height:"calc(100vh - 55px)"},children:[(0,n.jsx)(p.ZP,{language:y,value:q,theme:ae,options:{fontSize:12,minimap:{enabled:!1},lineNumbersMinChars:3,glyphMargin:!1},onMount:function(l){Q.current=l}}),(0,n.jsx)("pre",{style:{height:"100%",whiteSpace:"break-spaces"},children:_e})]}),(0,n.jsx)(x.default,{visible:k,handleCancel:function(){ue(!1)},file:{content:Q.current&&Q.current.getValue().replace(/\r\n/g,`
`),filename:v==null?void 0:v.title}}),(0,n.jsx)(i.default,{visible:K,handleCancel:function(){me(!1)}})]})};R.default=m},46127:function(re,R,e){e.r(R);var O=e(35290),r=e.n(O),a=e(30279),W=e.n(a),S=e(411),F=e.n(S),E=e(46686),D=e.n(E),u=e(63313),C=e.n(u),f=e(78455),p=e(80743),x=e(97325),i=e(2991),d=e(45362),n=e(9408),o=e(11527),A=function(m){var s=m.file,t=m.handleCancel,M=m.visible,_=f.Z.useForm(),c=D()(_,1),P=c[0],X=(0,u.useState)(!1),I=D()(X,2),w=I[0],B=I[1],q=function(){var L=F()(r()().mark(function T(b){var y;return r()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:B(!0),y=W()(W()(W()({},s),b),{},{originFilename:s.filename}),d.W.post("".concat(n.Z.apiPrefix,"scripts"),{data:y}).then(function(j){var v=j.code,V=j.data;v===200&&(p.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),t(V)),B(!1)});case 3:case"end":return U.stop()}},T)}));return function(b){return L.apply(this,arguments)}}();return(0,u.useEffect)(function(){P.resetFields(),B(!1)},[s,M]),(0,o.jsx)(x.Z,{title:"\u4FDD\u5B58\u6587\u4EF6",open:M,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){P.validateFields().then(function(T){q(T)}).catch(function(T){console.log("Validate Failed:",T)})},onCancel:function(){return t()},confirmLoading:w,children:(0,o.jsxs)(f.Z,{form:P,layout:"vertical",name:"script_modal",initialValues:s,children:[(0,o.jsx)(f.Z.Item,{name:"filename",label:"\u6587\u4EF6\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"}],children:(0,o.jsx)(i.Z,{placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"})}),(0,o.jsx)(f.Z.Item,{name:"path",label:"\u4FDD\u5B58\u76EE\u5F55",children:(0,o.jsx)(i.Z,{placeholder:"\u8BF7\u8F93\u5165\u4FDD\u5B58\u76EE\u5F55\uFF0C\u9ED8\u8BA4scripts\u76EE\u5F55"})})]})})};R.default=A},59386:function(re,R,e){e.r(R);var O=e(35290),r=e.n(O),a=e(30279),W=e.n(a),S=e(411),F=e.n(S),E=e(46686),D=e.n(E),u=e(63313),C=e.n(u),f=e(78455),p=e(80743),x=e(97325),i=e(2991),d=e(45362),n=e(9408),o=e(11527),A=function(m){var s=m.file,t=m.handleCancel,M=m.visible,_=f.Z.useForm(),c=D()(_,1),P=c[0],X=(0,u.useState)(!1),I=D()(X,2),w=I[0],B=I[1],q=function(){var L=F()(r()().mark(function T(b){var y;return r()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:B(!0),y=W()(W()({},s),b),d.W.post("".concat(n.Z.apiPrefix,"scripts"),{data:y}).then(function(j){var v=j.code,V=j.data;v===200&&(p.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),t(V)),B(!1)});case 3:case"end":return U.stop()}},T)}));return function(b){return L.apply(this,arguments)}}();return(0,u.useEffect)(function(){P.resetFields(),B(!1)},[s,M]),(0,o.jsx)(x.Z,{title:"\u8FD0\u884C\u8BBE\u7F6E",open:M,forceRender:!0,centered:!0,onCancel:function(){return t()},children:(0,o.jsx)(f.Z,{form:P,layout:"vertical",name:"setting_modal",initialValues:s,children:(0,o.jsx)(f.Z.Item,{name:"filename",label:"\u5F85\u5F00\u53D1",rules:[{required:!0,message:"\u5F85\u5F00\u53D1"}],children:(0,o.jsx)(i.Z,{placeholder:"\u5F85\u5F00\u53D1"})})})})};R.default=A},77136:function(re,R,e){e.d(R,{F:function(){return E},e:function(){return F}});var O=e(46686),r=e.n(O),a=e(63313),W=e.n(a),S=e(79610),F=function(){var u=(0,a.useState)("100%"),C=r()(u,2),f=C[0],p=C[1],x=(0,a.useState)(0),i=r()(x,2),d=i[0],n=i[1],o=(0,a.useState)(-72),A=r()(o,2),H=A[0],m=A[1],s=(0,a.useState)(!1),t=r()(s,2),M=t[0],_=t[1],c=(0,a.useMemo)(function(){return(0,S.ZP)()},[]),P=c.platform;return(0,a.useEffect)(function(){P==="mobile"&&document.body.offsetWidth<768?(p("auto"),n(0),m(0),_(!0)):(p("100%"),n(0),m(-72),_(!1))},[]),{headerStyle:{padding:"4px 16px 4px 15px",position:"sticky",top:0,left:0,zIndex:20,marginTop:H,width:f,marginLeft:d},isPhone:M}},E=function(){var u=(0,a.useState)(),C=r()(u,2),f=C[0],p=C[1],x=function(){var d=window.matchMedia("(prefers-color-scheme: dark)"),n=localStorage.getItem("qinglong_dark_theme"),o=d.matches&&n!=="light"||n==="dark";p(o?"vs-dark":"vs")};return(0,a.useEffect)(function(){var i=window.matchMedia("(prefers-color-scheme: dark)"),d=localStorage.getItem("qinglong_dark_theme"),n=i.matches&&d!=="light"||d==="dark";p(n?"vs-dark":"vs");var o=function(H){(d==="auto"||!d)&&(H.matches?p("vs-dark"):p("vs"))};typeof i.addEventListener=="function"?i.addEventListener("change",o):typeof i.addListener=="function"&&i.addListener(o)},[]),{theme:f,reloadTheme:x}}},77073:function(re,R,e){var O=e(47220),r=e(96600),a=e(84875),W=e.n(a),S=e(37900),F=e(1334),E=e(63313),D=e.n(E),u=e(71010),C=e(77621),f=e(4874),p=e(59418),x=e(19092),i=e(93600),d=e(51591),n=e(62330),o=function(s,t){var M={};for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&t.indexOf(_)<0&&(M[_]=s[_]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,_=Object.getOwnPropertySymbols(s);c<_.length;c++)t.indexOf(_[c])<0&&Object.prototype.propertyIsEnumerable.call(s,_[c])&&(M[_[c]]=s[_[c]]);return M},A="SECRET_COMBOBOX_MODE_DO_NOT_USE",H=function(t,M){var _,c=t.prefixCls,P=t.bordered,X=P===void 0?!0:P,I=t.className,w=t.getPopupContainer,B=t.dropdownClassName,q=t.popupClassName,L=t.listHeight,T=L===void 0?256:L,b=t.placement,y=t.listItemHeight,ee=y===void 0?24:y,U=t.size,j=t.disabled,v=t.notFoundContent,V=t.status,te=t.showArrow,Z=o(t,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),N=E.useContext(u.E_),le=N.getPopupContainer,se=N.getPrefixCls,ie=N.renderEmpty,k=N.direction,ue=N.virtual,ve=N.dropdownMatchSelectWidth,de=E.useContext(p.Z),K=se("select",c),me=se(),J=E.useMemo(function(){var fe=Z.mode;if(fe!=="combobox")return fe===A?"combobox":fe},[Z.mode]),ne=J==="multiple"||J==="tags",_e=te!==void 0?te:Z.loading||!(ne||J==="combobox"),$=(0,E.useContext)(x.aM),ge=$.status,ae=$.hasFeedback,Q=$.isFormItemInput,he=$.feedbackIcon,ce=(0,d.F)(ge,V),Y;v!==void 0?Y=v:J==="combobox"?Y=null:Y=(ie||C.Z)("Select");var G=(0,n.Z)((0,r.Z)((0,r.Z)({},Z),{multiple:ne,hasFeedback:ae,feedbackIcon:he,showArrow:_e,prefixCls:K})),pe=G.suffixIcon,Me=G.itemIcon,Oe=G.removeIcon,De=G.clearIcon,Ee=(0,F.Z)(Z,["suffixIcon","itemIcon"]),g=W()(q||B,(0,O.Z)({},"".concat(K,"-dropdown-").concat(k),k==="rtl")),l=U||de,h=E.useContext(f.Z),z=j||h,oe=W()((_={},(0,O.Z)(_,"".concat(K,"-lg"),l==="large"),(0,O.Z)(_,"".concat(K,"-sm"),l==="small"),(0,O.Z)(_,"".concat(K,"-rtl"),k==="rtl"),(0,O.Z)(_,"".concat(K,"-borderless"),!X),(0,O.Z)(_,"".concat(K,"-in-form-item"),Q),_),(0,d.Z)(K,ce,ae),I),Pe=function(){return b!==void 0?b:k==="rtl"?"bottomRight":"bottomLeft"};return E.createElement(S.ZP,(0,r.Z)({ref:M,virtual:ue,dropdownMatchSelectWidth:ve},Ee,{transitionName:(0,i.mL)(me,(0,i.q0)(b),Z.transitionName),listHeight:T,listItemHeight:ee,mode:J,prefixCls:K,placement:Pe(),direction:k,inputIcon:pe,menuItemSelectedIcon:Me,removeIcon:Oe,clearIcon:De,notFoundContent:Y,className:oe,getPopupContainer:w||le,dropdownClassName:g,showArrow:ae||te,disabled:z}))},m=E.forwardRef(H);m.SECRET_COMBOBOX_MODE_DO_NOT_USE=A,m.Option=S.Wx,m.OptGroup=S.Xo,R.Z=m}}]);
